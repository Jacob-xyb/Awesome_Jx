# 字符编码

## 字符编码的作用

计算机只认识0和1组成的二进制序列，因此任何文件中的内容要想被计算机识别或者想存储在计算机上都需要转换为二进制序列。那么字符与二进制序列怎么进行想换转换呢？于是人们尝试建立一个表格来***存储一个字符与一个二进制序列的对应关系***。

- **编码** 将字符转换为对应的二进制序列的过程叫做字符编码
- **解码** 将二进制序列转换为对应的字符的过程叫做字符解码

## 字符编码的简单发展过程

### ASCII码诞生

最早建立这个字符与十进制数字对应的关系的是美国，这张表被称为ASCII码(American Standard Code for Information Interface, 美国标准信息交换代码)。ASCII码是基于拉丁字母的一套电脑编程系统，主要用于显示现代英语和其他西欧语言。它被设计为用1个字节来表示一个字符，所以ASCII码表最多只能表示2**8=256个字符。实际上ASCII码表中只有128个字符，剩余的128个字符是预留扩展用的。

![img](https://images2015.cnblogs.com/blog/1063221/201611/1063221-20161122155336925-2078937469.jpg)

###  GBK等各国编码诞生

随着计算机的普及和发展，很过国家都开始使用计算机。大家发现ASCII码预留的128个位置根本无法存储自己国家的文字和字符，因此各个国家开始制定各自的字符编码表，其中中国的的字符编码表有GB2312和GBK。

###  Unicode诞生

后来随着世界互联网的形成和发展，各国的人们开始有了互相交流的需要。但是这个时候就存在一个问题，每个国家所使用的字符编码表都是不同的。

这个时候，人们希望有一个世界统一的字符编码表来存放所有国家所使用的文字和符号，这就是Unicode。Unicode又被称为 统一码、万国码、单一码，它是为了解决传统的字符编码方案的局限性而产生的，它为每种语言中的每个字符设定了统一并且为之一的二进制编码。Unicode规定所有的字符和符号最少由2个字节（16位）来表示，所以Unicode码可以表示的最少字符个数为2**16=65536。

### UTF-8诞生

为什么已经有了Unicode还要UTF-8呢？这是由于当时存储设备是非常昂贵的，而Unicode中规定所有字符最少要由2个字节表示。人们认为像原来ASCII码中的字符用1个字节就可以了，因此人们决定创建一个新的字符编码来节省存储空间。UTF-8是对Unicode编码的压缩和优化，它不在要求最少使用2个字节，而是将所有字符和符号进行分类：

- ascii码中的内容用1个字节保存
- 欧洲的字符用2个字节保存
- 东亚的字符用3个字节保存
- ...

UTF-8是目前最常用，也是被推荐使用的字符编码。

# 计算机运算

## 浮点数运算

### 什么是浮点数

在计算机系统的发展过程中，曾经提出过多种方法表达实数。

1. 定点数(Fixed Point Number)

典型的比如相对于浮点数的`定点数（Fixed Point Number）`。在这种表达方式中，小数点固定的位于实数所有数字中间的某个位置。

货币的表达就可以使用这种方式，比如 99.00 或者 00.99 可以用于表达具有四位精度（Precision），小数点后有两位的货币值。

由于小数点位置固定，所以可以直接用四位数值来表达相应的数值。SQL 中的 NUMBER 数据类型就是利用定点数来定义的。

2. 有理数表达

还有一种提议的表达方式为有理数表达方式，即用两个整数的比值来表达实数。

定点数表达法的缺点在于其形式过于僵硬，固定的小数点位置决定了固定位数的整数部分和小数部分，不利于同时表达特别大的数或者特别小的数。最终，绝大多数现代的计算机系统采纳了所谓的浮点数表达方式。

3. 浮点数表达

浮点数表达方式， 这种表达方式利用`科学计数法`来表达实数，即用`一个尾数（Mantissa ）`，`一个基数（Base）`，`一个指数（Exponent）`以及`一个表示正负的符号`来表达实数。比如 123.45 用十进制科学计数法可以表达为 1.2345 × 10^2 ，其中 1.2345 为尾数，10 为基数，2 为指数。浮点数利用指数达到了浮动小数点的效果，从而可以灵活地表达更大范围的实数。

提示: 尾数有时也称为有效数字（Significand）。**尾数实际上是有效数字的非正式说法。**

同样的数值可以有多种浮点数表达方式，比如上面例子中的 123.45 可以表达为 12.345 × 10^1，0.12345 × 10^3 或者 1.2345 × 10^2。因为这种多样性，有必要对其加以规范化以达到统一表达的目标。

### 浮点数表达

规范的（Normalized）浮点数表达方式具有如下形式：
$$
d.dd...d \times \beta^e , (0 \le d_i < \beta)
$$
 其中 d.dd...d 即尾数，β 为基数，e 为指数。**尾数中数字的个数称为精度**，在本文中用 p（presion） 来表示。每个数字 d 介于 0 和基数β之间，包括 0。小数点左侧的数字不为 0。

1. 基于**规范表达的浮点数**对应的具体值可由下面的表达式计算而得：(p是精度个数)

$$
\pm(d_0 + d_1\beta^{-1} + \dotsm + d_{p-1}\beta^{-(p-1)})\beta^e , (0 \le d_i < \beta)
$$

